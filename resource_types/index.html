<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Resource types - MEV REST API</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../css/theme.css" />
  <link rel="stylesheet" href="../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  <link href="../style.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Resource types";
    var mkdocs_page_input_path = "resource_types.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../js/jquery-2.1.1.min.js" defer></script>
  <script src="../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> MEV REST API</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../general_architecture/">Architecture</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Installation and Setup</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../install/">Preliminaries</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../mev_cluster_setup/">MEV cluster setup</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../setup_configuration/">Configuration</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../cromwell_setup/">Cromwell job runner setup</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">API</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../api/">Intro and core concepts</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Data Structures</a>
    <ul class="current">
                <li class="toctree-l2 current"><a class="reference internal current" href="#">Resources</a>
    <ul class="current">
                <li class="toctree-l3"><a class="reference internal" href="../resources/">General info</a>
                </li>
                <li class="toctree-l3 current"><a class="reference internal current" href="./">Resource types</a>
    <ul class="current">
    <li class="toctree-l4"><a class="reference internal" href="#table-based-resource-types">Table-based resource types</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#sequence-based-formats">Sequence-based formats</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../resource_metadata/">Resource metadata</a>
                </li>
                <li class="toctree-l3"><a class="reference internal" href="../operation_resources/">Operation-associated resources</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../attributes/">Attributes</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../elements/">Observations and Features</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../observation_and_feature_sets/">ObservationSet and FeatureSets</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../workspaces/">Workspaces</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../metadata/">Workspace metadata</a>
                </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../auth/">Authentication</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../operations/">Operation concepts</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../creating_analyses/">Creating new analyses/operations</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../example_workflow/">Workflow and analysis concepts</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">MEV REST API</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Resources &raquo;</li>
        
      
        
          <li>Data Structures &raquo;</li>
        
      
        
          <li>API &raquo;</li>
        
      
    
    <li>Resource types</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/web-mev/mev-backend/edit/master/docs/resource_types.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h3 id="resource-types"><a class="toclink" href="#resource-types">Resource types</a></h3>
<p>A <code>Resource</code> represents some generic notion of data and its <code>resource_type</code> field/member is a string identifier that identifies the specific format of the data. Resource types allow us to specify the format of input/output files of <code>Operation</code>s. Therefore, we can predictably present options for those inputs and allow <code>Resource</code>s to flow from one analysis to another.</p>
<p>The string identifiers map to concrete classes that implement validation methods for the <code>Resource</code>.  For example, the string <code>I_MTX</code> indicates that the <code>Resource</code> is an integer matrix. When a new <code>Resource</code> is added (via upload or directly by an admin via the API), the validation method is called.  Similarly, if a user tries to change the <code>resource_type</code>, it will trigger the validation process.</p>
<p>Current <code>resource_types</code> fall into several broad categories:</p>
<ul>
<li>Table-based formats</li>
<li>Sequence-based formats</li>
<li>JSON</li>
<li>General. Not a true type, but rather denotes that a better, more specific type cannot be specified.</li>
</ul>
<p><strong>Table-based formats</strong></p>
<p>Table-based formats are any matrix-like format, such as a typical CSV file.  In addition to being a common file format for expression matrices and similar experimental data, this covers a wide variety of standard formats encountered in computational biology, including GTF annotation files and BED files.</p>
<p>Specific types are shown below in the auto-generated documentation, but we touch on some of the more general descriptions immediately below.</p>
<p>During validation, the primitive data types contained in each column are determined using Python's Pandas library, which refers to these as "dtypes"; for example, a column identified as <code>int64</code> certainly qualifies as an integer type.  If the column contains any non-integers (but all numbers), Pandas automatically converts it to a float type (e.g. <code>float64</code>) which allows us to easily validate the content of each column. </p>
<p>We enforce that specific sub-types of this general table-based format adhere to our expectations. For instance, an expression matrix requires a first row which contains samples/observation names. Furthermore, the first column should correspond to gene identifiers (<code>Feature</code>s more generally). While we cannot exhaustively validate every file, we make certain reasonable assumptions. For example, if the first row is all numbers, we assume that a header is missing. Certainly one <em>could</em> name their samples with numeric identifiers, but we enforce that they need to be strings. Failure to conform to these expectations will result in the file failing to validate. Users should be informed of the failure with a helpful message for resolution.</p>
<p>Also note that while the user may submit files in a format such as CSV, we internally convert to a common format (e.g. TSV) so that downstream tools can avoid having to include multiple file-parsing schemes.</p>
<p>Since table-based formats naturally lend themselves to arrays of atomic items (i.e. each row as a "record"), the contents of table-based formats can be requested in a paginated manner via the API.</p>
<p><strong>Sequence-based formats</strong></p>
<p>Sequence-based formats are formats like FastQ, Fasta, or SAM/BAM. These types of files cannot reasonably be validated up front, so any <code>Operation</code>s which use these should plan on gracefully handling problems with their format.</p>
<p><strong>JSON</strong></p>
<p>For data that is not easily represented in a table-based format, we retain JSON as a general format. We use Python's internal <code>json</code> library to enforce the format of these files. Any failure to parse the file results in a validation error. </p>
<p>Note that the contents of array-based JSON files can be paginated, but general JSON objected-based resources cannot. An example of the former is:</p>
<pre class="codehilite"><code>[
    {
        &quot;keyA&quot;: 1,
        &quot;some_value&quot;: &quot;abc&quot;
    },
    ...
    {
        &quot;keyA&quot;: 8,
        &quot;some_value&quot;: &quot;xyz&quot;
    }
]</code></pre>


<p>These can be paginated so that each internal "object" (e.g. <code>{"keyA": 1,"some_value":"abc"}</code>) is a record. </p>
<p><strong>General</strong></p>
<p>Generally this format should be avoided as it allows un-validated/unrestricted data formats to be passed around. However, for certain types (such as a tarball of many files), we sometimes have no other reasonable option.</p>
<h4 id="table-based-resource-types"><a class="toclink" href="#table-based-resource-types">Table-based resource types</a></h4>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.table_types.<strong>TableResource</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>The <code>TableResource</code> is the most generic form of a delimited file.  Any
type of data that can be represented as rows and columns.</p>
<p>This or any of the more specific subclasses can be contained in files
saved in CSV, TSV, or Excel (xls/xlsx) format.  If in Excel format, the
data of interest must reside in the first sheet of the workbook.</p>
<p>Special tab-delimited files like BED or VCF files are recognized by
their canonical extension (e.g. ".bed" or ".vcf").</p>
<p>Note that unless you create a "specialized" implementation (e.g. like
for a BED file), then we assume you have features as rows and observables
as columns.</p></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.table_types.<strong>Matrix</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>A <code>Matrix</code> is a delimited table-based file that has only numeric types.
These types can be mixed, like floats and integers</p></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.table_types.<strong>IntegerMatrix</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>An <code>IntegerMatrix</code> further specializes the <code>Matrix</code>
to admit only integers.</p></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.table_types.<strong>RnaSeqCountMatrix</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>A very-explicit class (mainly for making things user-friendly)
where we provide specialized behavior/messages specific to count matrices
generated from RNA-seq data. The same as an integer matrix, but named to be
suggestive for WebMEV users.</p></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.table_types.<strong>ElementTable</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>An ElementTable captures common behavior of tables which
annotate <code>Observation</code>s (AnnotationTable) or <code>Feature</code>s (FeatureTable)</p>
<p>It's effectively an abstract class. See the derived classes which implement
the specific behavior for <code>Observation</code>s or <code>Feature</code>s.</p></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.table_types.<strong>AnnotationTable</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>An <code>AnnotationTable</code> is a special type of table that will be responsible
for annotating Observations/samples (e.g. adding sample names and
associated attributes like experimental group or other covariates)</p>
<p>The first column will give the sample names and the remaining columns will
each individually represent different covariates associated with that sample.</p></div>
</div>
<p>For example, if we received the following table:</p>
<table>
<thead>
<tr>
<th>sample</th>
<th>genotype</th>
<th>treatment</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>WT</td>
<td>Y</td>
</tr>
<tr>
<td>B</td>
<td>WT</td>
<td>N</td>
</tr>
</tbody>
</table>
<p>Then this table can be used to add <code>Attribute</code>s  to the corresponding <code>Observation</code>s. Note that the backend doesn't manage this. Instead, the front-end will be responsible for taking the <code>AnnotationTable</code> and creating/modifying <code>Observation</code>s.</p>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.table_types.<strong>FeatureTable</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>A <code>FeatureTable</code> is a type of table that has aggregate information about
the features, but does not have any "observations" in the columns.  An example
would be the results of a differential expression analysis.  Each row corresponds
to a gene (feature) and the columns are information about that gene (such as p-value).</p>
<p>Another example could be a table of metadata about genes (e.g. pathways or perhaps a
mapping to a different gene identifier).</p>
<p>The first column will give the feature/gene identifiers and the remaining columns will
have information about that gene</p></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.table_types.<strong>BEDFile</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>A file format that corresponds to the BED format.  This is
the minimal BED format, which has:</p>
<ul>
<li>chromosome</li>
<li>start position</li>
<li>end position</li>
</ul>
<p>Additional columns are ignored.</p>
<p>By default, BED files do NOT contain headers and we enforce that here.</p></div>
</div>
<h4 id="sequence-based-formats"><a class="toclink" href="#sequence-based-formats">Sequence-based formats</a></h4>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.sequence_types.<strong>SequenceResource</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>This class is used to represent sequence-based files
such as Fasta, Fastq, SAM/BAM</p>
<p>We cannot (reasonably) locally validate the contents of these
files quickly or exhaustively, so minimal validation is performed
remotely</p></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.sequence_types.<strong>FastAResource</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>This type is for validating Fasta files,
compressed or not.  Fasta files are recognized using
the following formats:</p>
<ul>
<li>fasta</li>
<li>fasta.gz</li>
<li>fa</li>
<li>fa.gz</li>
</ul></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.sequence_types.<strong>FastQResource</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>This resource type is for Fastq files,
compressed or not. Fastq files are recognized using
the following formats:</p>
<ul>
<li>fastq</li>
<li>fastq.gz</li>
<li>fq</li>
<li>fq.gz</li>
</ul></div>
</div>
<div class="autodoc">
<div class="autodoc-signature"><em>class </em><code>resource_types.sequence_types.<strong>AlignedSequenceResource</strong></code><span class="autodoc-punctuation">(</span><span class="autodoc-punctuation">)</span></div>
<div class="autodoc-docstring"><p>This resource type is for SAM/BAM files.  We accept
both SAM and BAM files named using their canonical extensions:</p>
<ul>
<li>".bam" for BAM files</li>
<li>".sam" for SAM files</li>
</ul></div>
</div>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../resource_metadata/" class="btn btn-neutral float-right" title="Resource metadata">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../resources/" class="btn btn-neutral" title="General info"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/web-mev/mev-backend/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../resources/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../resource_metadata/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
